# map_name_key: { rotation_key: [ "desc1", "desc2", "desc3", "desc4" ] }

TREASURE_CANDLES = {
    "Isle of Dawn": {
        "Permanent": ["晨島沒有每日輪替的大蠟燭，只有永久蠟燭點 (None)"]
    },
    "Daylight Prairie": {
        "Rotation 1": [
            "雲野大廳 (Social Space)：左前方地圖神像附近",
            "蝴蝶平原 (Butterfly Fields)：左側小山丘底部靠近隱藏洞穴入口",
            "蝴蝶平原：右側通往三塔圖的雲洞入口前",
            "雲野神殿：神殿內"
        ],
        "Rotation 2": [
            "雲野大廳：右側先祖石碑旁",
            "蝴蝶平原：中央大平原，靠近八人門（Cozy Hideout）的入口左側",
            "三塔圖 (Three Towers)：左側的山丘頂部",
            "浮島圖 (Floating Islands)：主島後方雲層邊緣"
        ],
        "Rotation 3": [
            "雲野大廳：中央神壇後方，前往蝴蝶平原的雲洞入口",
            "蝴蝶平原：中央偏右的大石頭旁邊",
            "三塔圖：右側山丘頂部",
            "浮島圖：前往神殿的雲洞入口前"
        ]
    },
    "Hidden Forest": {
        "Rotation 1": [
            "雨林大廳：左側先祖石碑旁",
            "靜謐庭院 (Brook)：第一扇雙人門後，烤火點旁邊",
            "螢光森林 (Walled Area)：進入後直走左側涼亭",
            "密林遺跡 (Elevated Clearing)：出口大門前，被雨淋到的地方"
        ],
        "Rotation 2": [
            "雨林大廳 (Social Space)：右側先祖石碑旁",
            "靜謐庭院：第一個亭子（有長椅的）頂部",
            "螢光小菇地圖 (Walled Area with Boats)：進入區域後右側帶屋簷的走廊上",
            "樹木繁茂區域 (Treed Area)：通往斷橋的最後一個樹洞內"
        ],
        "Rotation 3": [
            "雨林大廳 (Social Space)：左前方地圖神像旁",
            "靜謐庭院：往螢光森林前進的路上，左側的樹洞裡",
            "樹狀隧道 (Tree Tunnels)：通往斷橋區域 (Forest End) 的小樹洞入口內",
            "雨林終點 (Forest End)：湖邊後方"
        ],
        "Rotation 2 and 3": [
             "雨林大廳 (Social Space)：右側先祖石碑旁",
             "靜謐庭院：第一個亭子（有長椅的）頂部",
             "螢光小菇地圖 (Walled Area with Boats)：進入區域後右側帶屋簷的走廊上",
             "樹木繁茂區域 (Treed Area)：通往斷橋的最後一個樹洞內",
             "雨林大廳 (Social Space)：左前方地圖神像旁",
             "靜謐庭院：往螢光森林前進的路上，左側的樹洞裡",
             "樹狀隧道 (Tree Tunnels)：通往斷橋區域 (Forest End) 的小樹洞入口內",
             "雨林終點 (Forest End)：湖邊後方"
        ]
    },
    "Valley of Triumph": {
        "Rotation 1": [
            "社交空間/大廳：位於區域左側，靠近衣櫃旁邊。",
            "溜冰場：位於區域中央，通往霞光城橋樑上。",
            "霞光城/城堡：通過第一個拱門後，位於第二個平臺上。",
            "競技場/體育館：位於左側邊緣，看臺底部。"
        ],
        "Rotation 2": [
            "社交空間/大廳：位於區域右側，滑道起點處。",
            "溜冰場：位於冰面上，在橋樑的左側。",
            "霞光城/城堡：經過最高的拱門後，位於第二個平臺上。",
            "競技場/體育館：位於右側邊緣，看臺底部。"
        ],
        "Rotation 1 and 2": [
            "社交空間/大廳：位於區域左側，靠近衣櫃旁邊。",
            "溜冰場：位於區域中央，通往霞光城橋樑上。",
            "霞光城/城堡：通過第一個拱門後，位於第二個平臺上。",
            "競技場/體育館：位於左側邊緣，看臺底部。",
            "社交空間/大廳：位於區域右側，滑道起點處。",
            "溜冰場：位於冰面上，在橋樑的左側。",
            "霞光城/城堡：經過最高的拱門後，位於第二個平臺上。",
            "競技場/體育館：位於右側邊緣，看臺底部。"
        ],

        "Rotation 3": []
    },
    "Golden Wasteland": {
        "Rotation 1": [
            "暮土大廳 (Social Space)：前往第一張圖的雙人門前",
            "破敗神殿 (Broken Temple)：入口右側",
            "四龍圖 (Graveyard)：第二個有螃蟹點燃架的小亭子旁",
            "戰場 (Battlefield)：出口城牆邊緣"
        ],
        "Rotation 2": [
            "暮土大廳：左側先祖石碑旁",
            "破敗神殿：神殿內右側角落",
            "四龍圖：中央偏左的石柱後面",
            "螃蟹平原 (Crab Fields)：地圖中央的建築廢墟頂部"
        ],
        "Rotation 3": [
            "暮土大廳：右側樓梯下方",
            "破敗神殿：神殿內左側角落",
            "四龍圖：進入後左前方第一根柱子後方",
            "戰場：被黑水淹沒的區域，右側的傾斜建築結構上"
        ],
        "Rotation 1 and 2": [
            "暮土大廳 (Social Space)：前往第一張圖的雙人門前",
            "破敗神殿 (Broken Temple)：入口右側",
            "四龍圖 (Graveyard)：第二個有螃蟹點燃架的小亭子旁",
            "戰場 (Battlefield)：出口城牆邊緣",
            "暮土大廳：左側先祖石碑旁",
            "破敗神殿：神殿內右側角落",
            "四龍圖：中央偏左的石柱後面",
            "螃蟹平原 (Crab Fields)：地圖中央的建築廢墟頂部"
        ]
    },
    "Vault of Knowledge": {
        "Rotation 1": [
            "禁閣大廳 (Social Space)：右側先祖石碑旁",
            "第一層：四人門電梯旁",
            "第三層：中心浮台旁邊",
            "第五層：前往頂樓神殿的路上"
        ],
        "Rotation 2": [
            "禁閣大廳：左側地圖神像旁",
            "第一層：四人門內，點燃蠟燭後出現的隱藏燭火",
            "第四層：圖書館區域右側，光之子附近",
            "第五層：中心浮台上方，隱藏空間入口處"
        ],
        "Rotation 1 and 2": [
            "禁閣大廳 (Social Space)：右側先祖石碑旁",
            "第一層：四人門電梯旁",
            "第三層：中心浮台旁邊",
            "第五層：前往頂樓神殿的路上",
            "禁閣大廳：左側地圖神像旁",
            "第一層：四人門內，點燃蠟燭後出現的隱藏燭火",
            "第四層：圖書館區域右側，光之子附近",
            "第五層：中心浮台上方，隱藏空間入口處"
        ]
    }
}

# User requested to only show images for Seasonal, so we remove the generic text descriptions
# allowing the GUI to display just the images (or fallback numbering).
SEASONAL_CANDLES = {
    "Daylight Prairie": [
        "雲野大廳：前往蝴蝶平原的雲洞入口左側。",
        "雲野大廳：前往蝴蝶平原的雲洞入口右側。",
        "蝴蝶平原（第一張圖）：進入後左側山丘底部草地。",
        "蝴蝶平原（第一張圖）：右側前往三塔圖洞穴的入口前。"
    ],
    "Hidden Forest": [
        "雨林大廳：左側先祖石碑附近。",
        "雨林大廳：右側先祖石碑附近。",
        "靜謐庭院（第一張圖）：進入區域後的第一個亭子下方。",
        "螢光森林（第二張圖）：進入後，在右側有屋簷的走廊起點。"
    ],
    "Valley of Triumph": [
        "霞谷大廳：左側樓梯旁。",
        "霞谷大廳：右側樓梯旁。",
        "滑冰場（第一張圖）：中央競技場入口（雙人門）右側。",
        "滑冰場（第一張圖）：左側前往隱藏圖（有螃蟹的洞）的通道附近。"
    ],
    "Golden Wasteland": [
        "暮土大廳：前往第一張圖的雙人門左側。",
        "暮土大廳：前往第一張圖的雙人門右側。",
        "破敗神殿（第一張圖）：神殿入口正前方。",
        "破敗神殿（第一張圖）：神殿右側建築殘骸後方。"
    ],
    "Vault of Knowledge": [
        "禁閣大廳：左側先祖石碑附近。",
        "禁閣大廳：右側地圖神像附近。",
        "第一層：四人門所在的浮島邊緣。",
        "第二層：中心高塔的樓梯底部。"
    ]
}

def get_treasure_desc(realm, rotation):
    r_data = TREASURE_CANDLES.get(realm)
    if not r_data: return []
    
    # 1. First try exact match (handles "Rotation 1 and 2" if key exists)
    if rotation in r_data:
        return r_data[rotation]
    
    # Check for combined rotations (e.g. "Rotation 1 and 2")
    combined_descs = []
    found_any = False
    
    # We check each possible known rotation key to see if it's mentioned in the 'rotation' string.
    # The order matters if we want 1 then 2. 
    # Keys in dict are usually "Rotation 1", "Rotation 2", "Rotation 3".
    sorted_keys = sorted(r_data.keys()) 
    
    for k in sorted_keys:
        # Check if this key (e.g. "Rotation 1") is in the input string (e.g. "Rotation 1 and 2")
        # OR if the input string IS the key
        if k in rotation or rotation == k:
            combined_descs.extend(r_data[k])
            found_any = True
            
    if found_any:
        return combined_descs

    # Fallback: fuzzy match for other cases
    # (Though the logic above covers most cases if keys are "Rotation X")
    for k in r_data:
        if k in rotation or rotation in k:
            return r_data[k]
            
    return []

def get_seasonal_desc(realm):
    # Seasonal usually just depends on the Realm
    return SEASONAL_CANDLES.get(realm, [])
